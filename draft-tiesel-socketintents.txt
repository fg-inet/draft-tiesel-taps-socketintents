



TAPS Working Group                                             P. Tiesel
Internet-Draft                                               T. Enghardt
Intended status: Informational            Berlin Institute of Technology
Expires: December 3, 2017                                  June 01, 2017


                             Socket Intents
                   draft-tiesel-socketintents-latest

Abstract

   This document outlines an API-independent concept that allows
   applications to share their knowledge about upcoming communication
   and express their performance preferences in a portable and abstract
   way: Socket Intents.  Socket Intents express what an application
   knows, assumes, expects or wants to prioritize regarding its own
   network communication.  The information provided by Socket Intents
   should be taken into account by the network stack in a best-effort
   way.

   Socket Intent can be used to stem against the complexity and make use
   of multiple provisioning domains as well as new transport protocols
   and features available to a larger user base by expressing the
   applications intents in an abstract and portable way.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on December 3, 2017.

Copyright Notice

   Copyright (c) 2017 IETF Trust and the persons identified as the
   document authors.  All rights reserved.





Tiesel & Enghardt       Expires December 3, 2017                [Page 1]

Internet-Draft                SocketIntents                    June 2017


   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Conventions and Definitions . . . . . . . . . . . . . . . . .   2
   2.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   3.  Problem Statement . . . . . . . . . . . . . . . . . . . . . .   3
   4.  General Concept . . . . . . . . . . . . . . . . . . . . . . .   4
     4.1.  Interactions between Socket Intents and QoS . . . . . . .   4
   5.  Initial Socket Intent Types . . . . . . . . . . . . . . . . .   4
     5.1.  Flow Category . . . . . . . . . . . . . . . . . . . . . .   4
     5.2.  Object Size to be Sent / Received . . . . . . . . . . . .   5
     5.3.  Flow Duration . . . . . . . . . . . . . . . . . . . . . .   5
     5.4.  Stream Bitrate Sent / Received  . . . . . . . . . . . . .   6
     5.5.  Burstiness  . . . . . . . . . . . . . . . . . . . . . . .   6
     5.6.  Timeliness  . . . . . . . . . . . . . . . . . . . . . . .   7
     5.7.  Application Resilience  . . . . . . . . . . . . . . . . .   7
     5.8.  Cost Preferences  . . . . . . . . . . . . . . . . . . . .   8
   6.  Implementation Guidelines . . . . . . . . . . . . . . . . . .   8
   7.  Security Considerations . . . . . . . . . . . . . . . . . . .   9
   8.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   9
   9.  Usage examples  . . . . . . . . . . . . . . . . . . . . . . .   9
   10. References  . . . . . . . . . . . . . . . . . . . . . . . . .   9
     10.1.  Normative References . . . . . . . . . . . . . . . . . .   9
     10.2.  Informative References . . . . . . . . . . . . . . . . .  10
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  10

1.  Conventions and Definitions

   The words "MUST", "MUST NOT", "SHALL", "SHALL NOT", "SHOULD", and
   "MAY" are used in this document.  It's not shouting; when these words
   are capitalized, they have a special meaning as defined in [RFC2119].

   Default values in Section 5 are marked with an asterisk (*).

2.  Introduction

   Despite recent advances in the transport area, the adaption of new
   transport protocols and transport protocol features is slow and only
   happens in limited domains (primarily in the Web browser and within



Tiesel & Enghardt       Expires December 3, 2017                [Page 2]

Internet-Draft                SocketIntents                    June 2017


   datacenters).  The same problem occurs for taking advantage of
   multiple available access networks or provisioning domains (PvDs).
   In both cases, the benefits of the new transport diversity comes at
   the cost of an increased complexity that has to be mastered by the
   application programmer.

   Enabling features like TCP fast open [RFC7413] or controlling how
   MPTCP [RFC6824] creates subflows requires specialized APIs that are
   not part of the standard socket API, often require deep knowledge of
   the transport protocol internals, and are not portable across
   different implementations.

   Applications that want to use multiple network interfaces usually
   have to use their own heuristics to select which access network to
   use.  Choosing the right interface is difficult as their
   characteristics differ, e.g. in terms of performance, and obtaining
   the necessary information is often not easy since it may require
   special privileges and differs heavily by implementation.

   In all cases mentioned above, an application that wants to take
   advantage of the available transport diversity is faced with
   substantially higher complexity regarding network APIs and networking
   code.

3.  Problem Statement

   Application programmers opening a communication channel typically
   know how this channel will be used.  Beside the hard requirements
   already necessary for establishing the communication channels, e.g.,
   reliable in-order stream transport, there is more information
   available: An application developer has an intuition about
   optimization preferences, e.g., optimize for bandwidth, latency, or
   cost, about expectations, e.g.  towards data loss, and possibly also
   about specifics, such as how many bytes will be sent or received.

   This information does not directly map to the choice of a transport
   protocol, to certain protocol parameters, nor to which PvD to use,
   but the information can imply that the application can benefit from
   certain transport options or help to choose between multiple PvD as
   described in [RFC7556], Section 6.2, and therefore enable the OS to
   adjust its defaults for this communication channel accordingly.

   The preferences, expectations and other information known about the
   upcoming communication MAY be expressible in an intuitive, abstract
   way independent of the network- and transport protocol.  Its
   representation SHOULD be independent of the actual API used for
   network communication, e.g., these SHOULD be expressible in whatever
   API available, e.g., as "socketopts" for BSD sockets or as part of



Tiesel & Enghardt       Expires December 3, 2017                [Page 3]

Internet-Draft                SocketIntents                    June 2017


   the address resolution configuration for Post Sockets
   [I-D.trammell-post-sockets].  Finally, given the expectations and
   external constraints known, the OS SHOULD use the information
   provided via Socket Intents in an best-effort fashion and therefore
   try to choose the best transport protocol, default parameters and
   PvDs available and MAY try to further optimize based on them.

4.  General Concept

   With Socket Intents, applications MAY express their communication
   preferences in order to take advantage of the available transfer
   diversity.  Depending on the API used, Socket Intents can be used on
   a per association, connection, stream, or packet level.  TODO: Link
   to third draft Communication preference refers to desired transport
   characteristics, e.g., low delay or high throughput, stable transport
   or minimal cost, and is optional information.

4.1.  Interactions between Socket Intents and QoS

   Socket Intents are not QoS labels, but have an orthogonal meaning.

   o  Socket Intents SHALL be purely advisory.

   o  Socket Intents MUST NOT be used to derive IntServ / RSVP style
      guarantees.

   o  Socket Intents SHOULD be taken into account on a best-effort basis
      and MAY be used to derive DiffServ Service Classes as described in
      [RFC4594].

5.  Initial Socket Intent Types

   The following sections contain a list or Socket Intent types and
   their possible values.  Each Intent type has a name, a data type
   (Enum, Int or Float) and a description when it SHOULD be used.
   Socket Intents with enum data type also have a list of valid values
   and their description.

   Additional Socket Intent Types SHALL be managed in an IANA registry.
   Names of experimental Socket Intent types MUST start with "x-" and
   SHALL NOT be managed by the IANA.

5.1.  Flow Category

   The flow category describes the dominating traffic pattern of the
   respective communication unit expected by the application.

   Short name:  flowtype



Tiesel & Enghardt       Expires December 3, 2017                [Page 4]

Internet-Draft                SocketIntents                    June 2017


   Applicability:  Association, Connection, Stream

   Data type:  Enum

   +---------+---------------------------------------------------------+
   | Level   | Description                                             |
   +---------+---------------------------------------------------------+
   | query   | Single request / response style workload, latency bound |
   |         |                                                         |
   | control | Long lasting low bandwidth control channel, not         |
   |         | bandwidth bound                                         |
   |         |                                                         |
   | stream  | Stream of bytes/objects with steady data rate           |
   |         |                                                         |
   | bulk    | Bulk transfer of large objects, presumably bandwidth    |
   |         | bound                                                   |
   |         |                                                         |
   | mixed*  | Don't know or none of the above                         |
   +---------+---------------------------------------------------------+

   Note:  Most categories suggest the use of other intents to further
      describe the traffic pattern anticipated, e.g., the bulk category
      suggesting the use of the Object Size intents or the stream
      category suggesting the Stream Bitrate and Flow Duration intents.

5.2.  Object Size to be Sent / Received

   This Intent is used to communicate the expected size of a transfer.

   Short name:  sndobjsz / recvobjsz

   Applicability:  Association, Connection, Stream, Object

   Data type:  Int (bytes)

5.3.  Flow Duration

   This Intent is used to communicate the expected lifetime of the
   respective communication unit.

   Short name:  duration

   Applicability:  Association, Connection, Stream

   Data type:  Int (msec)






Tiesel & Enghardt       Expires December 3, 2017                [Page 5]

Internet-Draft                SocketIntents                    June 2017


5.4.  Stream Bitrate Sent / Received

   This Intent is used to communicate the bitrate of the respective
   communication unit.

   Short name:  sndrate / recvrate

   Applicability:  Association, Connection, Stream

   Data type:  Int (bytes/sec)

5.5.  Burstiness

   This Intent describes the anticipated sender-side burst
   characteristics of the traffic for this communication unit.  It
   expresses how the traffic sent by the application is expected to vary
   over time, and, consequently, how long sequences of consecutively
   sent packets will be.  Note that the actual burst characteristics of
   the traffic at the receiver side will depend on the network.

   This Intent can provide hints to the application on what the resource
   usage pattern for this communication unit will look like, which can
   be useful for balancing the requirements of different application.

   Short name:  burst

   Applicability:  Association, Connection, Stream

   Data type:  Enum

   +----------------+--------------------------------------------------+
   | Level          | Description                                      |
   +----------------+--------------------------------------------------+
   | no_bursts      | Application sends traffic at a constant rate     |
   |                |                                                  |
   | regular_bursts | Application sends bursts of traffic periodically |
   |                |                                                  |
   | random_bursts  | Application sends bursts of traffic irregularly  |
   |                |                                                  |
   | bulk           | Application sends a bulk of traffic              |
   |                |                                                  |
   | mixed*         | Don't know or none of the above                  |
   +----------------+--------------------------------------------------+








Tiesel & Enghardt       Expires December 3, 2017                [Page 6]

Internet-Draft                SocketIntents                    June 2017


5.6.  Timeliness

   This Intent describes the desired delay characteristics for this
   communication unit.  It provides hints for the OS whether to optimize
   for low delay or for other criteria.  There are no hard requirements
   or implied guarantees on whether these requirements can actually be
   satisfied.

   Short name:  timeliness

   Applicability:  Association, Connection, Stream, Object

   Data type:  Enum

   +-------------+-----------------------------------------------------+
   | Level       | Description                                         |
   +-------------+-----------------------------------------------------+
   | stream      | Delay and packet delay variation should be kept as  |
   |             | low as possible                                     |
   |             |                                                     |
   | interactive | Delay should be kept as low as possible, but some   |
   |             | variation is tolerable                              |
   |             |                                                     |
   | transfer*   | Delay and packet delay variation souls be           |
   |             | reasonable, but are not critical                    |
   |             |                                                     |
   | background  | Delay and packet delay variation is no concern      |
   +-------------+-----------------------------------------------------+

5.7.  Application Resilience

   This Intent describes how an application deals with disruption of its
   communication, e.g. connection loss.  It communicates how well the
   application can recover from such disturbance and can have
   implications on how many resources the OS should allocate to failover
   techniques for this particular communication unit.

   Short name:  resilience

   Applicability:  Association, Connection, Stream, Object

   Data type:  Enum









Tiesel & Enghardt       Expires December 3, 2017                [Page 7]

Internet-Draft                SocketIntents                    June 2017


   +-------------+-----------------------------------------------------+
   | Level       | Description                                         |
   +-------------+-----------------------------------------------------+
   | sensitive*  | Disruptions result in application failure,          |
   |             | disrupting user experience                          |
   |             |                                                     |
   | recoverable | Disruptions are inconvenient for the application,   |
   |             | but can be recovered from                           |
   |             |                                                     |
   | resilient   | Disruptions have minimal impact for the application |
   +-------------+-----------------------------------------------------+

5.8.  Cost Preferences

   This describes the Intents of an Application towards costs cased by
   the respective communication unit.  It should guide the OS how to
   handle cost vs. performance and reliability tradeoffs.

   Short name:  cost

   Applicability:  Association, Connection, Stream, Object

   Data type:  Enum

   +---------------+---------------------------------------------------+
   | Level         | Description                                       |
   +---------------+---------------------------------------------------+
   | no_expense    | Avoid expensive transports and consider failing   |
   |               | otherwise                                         |
   |               |                                                   |
   | optimize_cost | Prefer inexpensive transports and accept service  |
   |               | degradation                                       |
   |               |                                                   |
   | balance_cost* | Use system policy to balance cost and other       |
   |               | criteria                                          |
   |               |                                                   |
   | ignore_cost   | Ignore cost, choose transport solely based on     |
   |               | other criteria                                    |
   +---------------+---------------------------------------------------+

6.  Implementation Guidelines

   TBD








Tiesel & Enghardt       Expires December 3, 2017                [Page 8]

Internet-Draft                SocketIntents                    June 2017


7.  Security Considerations

   We assume that applications specify their preferences in a selfish,
   but not malicious way and that it is up to the OS to find a
   compromise between demands.  Therefore, selfish behavior does not
   hurt other applications as it would with prioritization.

   TODO: elaborate

8.  IANA Considerations

   Socket Intents types in addition to those described in Section 5
   SHALL be managed by the IANA.

   TBD: come up with guidelines according to [RFC5226]

9.  Usage examples

   o  Consider a cellphone performing a minor os feature update.  This
      process usually implies downloading a large file.  This is a bulk
      transfer for which the application may already know the file size.
      Timing is typically noncritical and the data can be downloaded as
      background traffic with minimal cost and power overhead.  It would
      not hurt if the TCP connection was closed during the transfer as
      the download can be continued.  For this connection the
      application can set the general category bulk transfer.
      Additional information provided can be file size, timeliness, and
      resilience.

   o  Considering a user watching non-live video content.  This usually
      means fetching a stream of video chunks.  The application should
      know the size of each chunk and may know the bitrate and the
      duration of each chunk and the whole video.  Disconnection of the
      TCP connection should be avoided because that might have an effect
      that is visible to the user.  It can put this connection into the
      general category "stream transfer" with additional information
      about duration, bitrate and resilience.

10.  References

10.1.  Normative References

   [RFC5226]  Narten, T. and H. Alvestrand, "Guidelines for Writing an
              IANA Considerations Section in RFCs", BCP 26, RFC 5226,
              DOI 10.17487/RFC5226, May 2008,
              <http://www.rfc-editor.org/info/rfc5226>.





Tiesel & Enghardt       Expires December 3, 2017                [Page 9]

Internet-Draft                SocketIntents                    June 2017


10.2.  Informative References

   [I-D.pauly-taps-guidelines]
              Pauly, T., "Software Guidelines for Protocol Evolution",
              draft-pauly-taps-guidelines-00 (work in progress),
              February 2017.

   [I-D.trammell-post-sockets]
              Trammell, B., Perkins, C., Pauly, T., and M. Kuehlewind,
              "Post Sockets, An Abstract Programming Interface for the
              Transport Layer", draft-trammell-post-sockets-00 (work in
              progress), October 2016.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <http://www.rfc-editor.org/info/rfc2119>.

   [RFC4594]  Babiarz, J., Chan, K., and F. Baker, "Configuration
              Guidelines for DiffServ Service Classes", RFC 4594,
              DOI 10.17487/RFC4594, August 2006,
              <http://www.rfc-editor.org/info/rfc4594>.

   [RFC6824]  Ford, A., Raiciu, C., Handley, M., and O. Bonaventure,
              "TCP Extensions for Multipath Operation with Multiple
              Addresses", RFC 6824, DOI 10.17487/RFC6824, January 2013,
              <http://www.rfc-editor.org/info/rfc6824>.

   [RFC7413]  Cheng, Y., Chu, J., Radhakrishnan, S., and A. Jain, "TCP
              Fast Open", RFC 7413, DOI 10.17487/RFC7413, December 2014,
              <http://www.rfc-editor.org/info/rfc7413>.

   [RFC7556]  Anipko, D., Ed., "Multiple Provisioning Domain
              Architecture", RFC 7556, DOI 10.17487/RFC7556, June 2015,
              <http://www.rfc-editor.org/info/rfc7556>.

Authors' Addresses

   Philipp S. Tiesel
   Berlin Institute of Technology
   Marchstr. 23
   Berlin
   Germany

   Email: philipp@inet.tu-berlin.de






Tiesel & Enghardt       Expires December 3, 2017               [Page 10]

Internet-Draft                SocketIntents                    June 2017


   Theresa Enghardt
   Berlin Institute of Technology
   Marchstr. 23
   Berlin
   Germany

   Email: theresa@inet.tu-berlin.de












































Tiesel & Enghardt       Expires December 3, 2017               [Page 11]
